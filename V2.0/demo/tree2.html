<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>tree</title>
    <link rel="stylesheet" type="text/css" href="../../css/common.css">
    <link rel="stylesheet" type="text/css" href="../../skin/default/skin.css">
    <link rel="stylesheet" type="text/css" href="../../docs/resource/demo.css">
    <script type="text/javascript" src="../../scriptes/jquery.js"></script>
    <script type="text/javascript" src="../../docs/resource/demo.js"></script>

    <script type="text/javascript" src="../../controls/seeyon.ui.tree-debug.js"></script>
</head>
<body>          
    <ul id="treeDemo3" class="ztree"></ul>
    <script type="text/javascript">
        var setting3 = {
            edit: {
                enable: true,
                showRemoveBtn: false,
                showRenameBtn: false
            },
            data: {
                simpleData: {
                    enable: true
                }
            },
            callback: {
                beforeDrag: beforeDrag3,
                beforeDrop: beforeDrop3
            }
        };

        var zNodes3 = [
            { id: 1, pId: 0, name: "随意拖拽 1", open: true },
            { id: 11, pId: 1, name: "随意拖拽 1-1" },
            { id: 12, pId: 1, name: "随意拖拽 1-2", open: true },
            { id: 121, pId: 12, name: "随意拖拽 1-2-1" },
            { id: 122, pId: 12, name: "随意拖拽 1-2-2" },
            { id: 123, pId: 12, name: "随意拖拽 1-2-3" },
            { id: 13, pId: 1, name: "禁止拖拽 1-3", open: true, drag: false },
            { id: 131, pId: 13, name: "禁止拖拽 1-3-1", drag: false },
            { id: 132, pId: 13, name: "禁止拖拽 1-3-2", drag: false },
            { id: 133, pId: 13, name: "随意拖拽 1-3-3" },
            { id: 2, pId: 0, name: "随意拖拽 2", open: true },
            { id: 21, pId: 2, name: "随意拖拽 2-1" },
            { id: 22, pId: 2, name: "禁止拖拽到我身上 2-2", open: true, drop: false },
            { id: 221, pId: 22, name: "随意拖拽 2-2-1" },
            { id: 222, pId: 22, name: "随意拖拽 2-2-2" },
            { id: 223, pId: 22, name: "随意拖拽 2-2-3" },
            { id: 23, pId: 2, name: "随意拖拽 2-3" }
        ];

        function beforeDrag3(treeId, treeNodes) {
            for (var i = 0, l = treeNodes.length; i < l; i++) {
                if (treeNodes[i].drag === false) {
                    return false;
                }
            }
            return true;
        }
        function beforeDrop3(treeId, treeNodes, targetNode, moveType) {
            return targetNode ? targetNode.drop !== false : true;
        }

        function setCheck3() {
            //							var zTree = $.fn.zTree.getZTreeObj("treeDemo3"),
            //							isCopy = $("#copy").attr("checked"),
            //							isMove = $("#move").attr("checked"),
            //							prev = $("#prev").attr("checked"),
            //							inner = $("#inner").attr("checked"),
            //							next = $("#next").attr("checked");
            //							zTree.setting.edit.drag.isCopy = isCopy;
            //							zTree.setting.edit.drag.isMove = isMove;
            //							showCode3(1, ['setting.edit.drag.isCopy = ' + isCopy, 'setting.edit.drag.isMove = ' + isMove]);
            //				
            //							zTree.setting.edit.drag.prev = prev;
            //							zTree.setting.edit.drag.inner = inner;
            //							zTree.setting.edit.drag.next = next;
            //							showCode3(2, ['setting.edit.drag.prev = ' + prev, 'setting.edit.drag.inner = ' + inner, 'setting.edit.drag.next = ' + next]);
        }
        function showCode3(id, str) {
            var code = $("#code" + id);
            code.empty();
            for (var i = 0, l = str.length; i < l; i++) {
                code.append("<li>" + str[i] + "</li>");
            }
        }

        $(document).ready(function () {
            $.fn.zTree.init($("#treeDemo3"), setting3, zNodes3);
            setCheck3();
            $("#copy").bind("change", setCheck3);
            $("#move").bind("change", setCheck3);
            $("#prev").bind("change", setCheck3);
            $("#inner").bind("change", setCheck3);
            $("#next").bind("change", setCheck3);
        });
    </script>
	<div><a href="http://10.3.4.240:8080/userContent/ctp_pub/docs/CTP开发指南.html#d5e2214">查看代码</a></div>
</body>
</html>
